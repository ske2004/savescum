import (
  "window.um"
  "canvas.um"
  "rect.um"
  "th.um"
  "input.um"
  "../../src/d_util.um"
  "d_act.um"
  "d_layout.um"
)

actstatus := d_act.ActStatus{}

toollist := d_act.ToolList{}

fn init*() {
  objects := []d_layout.Object{
    {{666, 400}, 5},
    {{412, 666}, 10}
  }

  toollist.tools = d_layout.resolve(objects)

  window.setup("UI test", 1920, 1080)

  window.onFrame.register({
    mouseact := d_act.ActViaMouse{
      mouse: input.getMousePos(),
      pressing: input.isPressed(.mouse1)
    }

    actstatus.update(&toollist, mouseact)

    for i, tool in toollist.tools {
      canvas.drawRect(0x00000022, tool.r)
    }

    d_act.renderDebugInfo(&actstatus)
  })
}
