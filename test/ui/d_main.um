import (
  "window.um"
  "d_ui.um"
  "../../src/d_mouseinput.um"
)

var ui: d_ui.Ui
var x: real
var y: real
var mi: d_mouseinput.MouseState

fn widgetWindow(title: str) {
  ui.beginTool(title+" (Window)", {200+x, 200+y, 400, 400})
    ui.beginTool(title+" (Titlebar)", {205+x, 205+y, 390, 40})
      if (ui.active()) {
        x += mi.delta.x
        y += mi.delta.y
      }
    ui.endTool()
    ui.beginTool(title+" (Content)", {205+x, 250+y, 390, 345})
    ui.endTool()
  ui.endTool()
}

fn init*() {

  window.setup("UI test", 1920, 1080)

  ui = d_ui.create()

  window.onFrame.register({
    mi = mi.updated()

    ui.begin()
    widgetWindow("Test")
    ui.end()
  })
}
