import (
  "window.um"
  ui = "myui.um"
  "../../src/mouseinput.um"
)

var ui: ui::Ui
var x: real
var y: real
var mi: mouseinput::MouseState

fn widgetWindow(title: str) {
  _x := x
  _y := y

  ui.beginTool(title+" (Window)", {200+_x, 200+_y, 400, 400})
    ui.beginTool(title+" (Titlebar)", {205+_x, 205+_y, 390, 40})
      if (ui.active()) {
        x += mi.delta.x
        y += mi.delta.y
      }
    ui.endTool()
    ui.beginTool(title+" (Content)", {205+_x, 250+_y, 390, 345})
    ui.endTool()
  ui.endTool()
}

fn init*() {
  window::setup("UI test", 1920, 1080)

  ui = ui::create()

  window::onFrame.register({
    mi = mi.updated()

    ui.begin()
    widgetWindow("Test")
    ui.end()
  })
}
